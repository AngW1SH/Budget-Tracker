generator client {
    provider = "prisma-client-js"
    output   = "./client"
}

datasource db {
    provider = "postgresql"
    url      = env("APP_DATABASE_URL")
}

// npx prisma generate --schema prisma/app-db/schema.prisma
// npx prisma migrate dev --schema prisma/app-db/schema.prisma

model Category {
    id                String            @id @default(uuid())
    name              String
    userId            String
    creationtime      DateTime          @default(now())
    type              String            @default("expense") // expense or income
    transactions      Transaction[]
    categoriesInMonth CategoryInMonth[]
}

model Month {
    id         String            @id @default(uuid())
    date       DateTime
    goal       Int               @default(0)
    spent      Int               @default(0)
    categories CategoryInMonth[]
    userId     String
}

model CategoryInMonth {
    id          String    @id @default(uuid())
    description String
    category    Category? @relation(fields: [categoryId], references: [id])
    categoryId  String?
    month       Month     @relation(fields: [monthId], references: [id])
    monthId     String
    goal        Int?
    spent       Int
    userId      String
}

model Transaction {
    id          String    @id @default(uuid())
    category    Category? @relation(fields: [categoryId], references: [id])
    categoryId  String?
    subcategory String?
    description String    @default("")
    day         Day       @relation(fields: [dayId], references: [id])
    dayId       String
    userId      String
    type        String    @default("expense") // expense or income
    value       Int
}

model Day {
    id         String        @id @default(uuid())
    categories Transaction[]
    userId     String
    date       DateTime
    active     Boolean       @default(false)
}
